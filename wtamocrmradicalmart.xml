<?xml version="1.0" encoding="utf-8"?>
<extension type="plugin" group="radicalmart" method="upgrade">
    <name>PLG_WTAMOCRMRADICALMART</name>
    <author>Sergey Tolkachyov</author>
    <creationDate>03.12.2025</creationDate>
    <copyright>Copyright (c) 2025 Sergey Tolkachyov. All rights reserved.</copyright>
    <license>https://www.gnu.org/copyleft/gpl.html GNU/GPL</license>
    <authorEmail>info@web-tolk.ru</authorEmail>
    <authorUrl>https://web-tolk.ru</authorUrl>
    <version>1.0.2</version>
    <description>PLG_WTAMOCRMRADICALMART_DESC</description>
    <namespace path="src">Joomla\Plugin\RadicalMart\Wtamocrmradicalmart</namespace>
    <scriptfile>script.php</scriptfile>
    <languages folder="language">
        <language tag="en-GB">en-GB/plg_radicalmart_wtamocrmradicalmart.ini</language>
        <language tag="en-GB">en-GB/plg_radicalmart_wtamocrmradicalmart.sys.ini</language>
        <language tag="ru-RU">ru-RU/plg_radicalmart_wtamocrmradicalmart.ini</language>
        <language tag="ru-RU">ru-RU/plg_radicalmart_wtamocrmradicalmart.sys.ini</language>
    </languages>
    <files>
        <folder>forms</folder>
        <folder>services</folder>
        <folder plugin="wtamocrmradicalmart">src</folder>
		<folder>sql</folder>
    </files>
	<install>
		<sql>
			<file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
		</sql>
	</install>
	<uninstall>
		<sql>
			<file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
		</sql>
	</uninstall>
	<update>
		<schemas>
			<schemapath type="mysql">sql/updates/mysql</schemapath>
		</schemas>
	</update>
    <config>
        <fields name="params">
            <fieldset name="basic">
                <field addfieldprefix="Joomla\Plugin\RadicalMart\Wtamocrmradicalmart\Field"
                       type="plugininfo"
                       name="plugininfo"/>
                <field addfieldprefix="Webtolk\Amocrm\Fields" type="accountinfo" name="accountinfo"/>
                <field type="note" class="alert alert-info" label="PLG_WTAMOCRMRADICALMART_DETAIL_DESC_LABEL"
                       description="PLG_WTAMOCRMRADICALMART_DETAIL_DESC"/>
                <field addfieldprefix="Joomla\Component\RadicalMart\Administrator\Field"
                       type="statuses"
                       name="statuses"
                       label="PLG_WTAMOCRMRADICALMART_RADICALMART_STATUSES"
                       description="PLG_WTAMOCRMRADICALMART_RADICALMART_STATUSES_DESC"
                       multiple="true"
                       layout="joomla.form.field.list-fancy-select"
                       filter="intarray"/>
                <field addfieldprefix="Webtolk\Amocrm\Fields"
                       type="Leadspipelineslist"
                       name="pipeline_id"
                       label="PLG_WTAMOCRMRADICALMART_PIPELINE_ID"
                       description="PLG_WTAMOCRMRADICALMART_PIPELINE_ID_DESC"
                       filter="integer"/>
                <field addfieldprefix="Webtolk\Amocrm\Fields"
                       type="Leadstagslist"
                       name="lead_tag_id"
                       limit="250"
                       label="PLG_WTAMOCRMRADICALMART_LEAD_TAG_ID"
                       description="PLG_WTAMOCRMRADICALMART_LEAD_TAG_ID_DESC"/>
                <field type="radio"
                       name="amocrm_note_order_items"
                       label="PLG_WTAMOCRMRADICALMART_AMOCRM_NOTE_ORDER_ITEMS"
                       description="PLG_WTAMOCRMRADICALMART_AMOCRM_NOTE_ORDER_ITEMS_DESC"
                       default="0"
                       class="btn-group btn-group-yesno"
                >
                    <option value="1">JYES</option>
                    <option value="0">JNO</option>
                </field>
                <field type="note" label="PLG_WTAMOCRMRADICALMART_UTM_HEADER" description="PLG_WTAMOCRMRADICALMART_UTM"
                       class="alert alert-info"/>
                <field type="radio"
                       name="use_utm_js_script"
                       label="PLG_WTAMOCRMRADICALMART_USE_UTM_JS_SCRIPT"
                       description="PLG_WTAMOCRMRADICALMART_USE_UTM_JS_SCRIPT_DESC"
                       default="1" class="btn-group btn-group-yesno">
                    <option value="1">JYES</option>
                    <option value="0">JNO</option>
                </field>

            </fieldset>
        </fields>
    </config>
    <updateservers>
        <server type="extension" priority="1" name="WT AmoCRM - RadicalMart updates">
            https://web-tolk.ru/component/swjprojects/jupdate?element=wtamocrmradicalmart
        </server>
    </updateservers>
    <changelogurl>https://web-tolk.ru/jchangelog?element=wtamocrmradicalmart</changelogurl>
</extension>